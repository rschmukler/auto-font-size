"use strict";angular.module("AutoFontSize",[]).directive("autoFontSize",["$window",function(a){return{template:'<div data-role="inner" ng-transclude></div>',transclude:!0,link:{post:function(b,c,d){function e(){var a=0;if(i(),k()&&n.shrink)for(;k()&&100>a&&g()>=n.minSize;)h(g()-1),a+=1;else{if(!l()||!n.grow)return;for(;l()&&100>a;)h(g()+1),a+=1;h(g()-1)}b.$emit("auto-font-size:resized",{fontSize:g(),elem:c})}function f(b,c){return a.getComputedStyle?a.getComputedStyle(b[0]).getPropertyValue(c):void 0}function g(){var a=f(o,"font-size");return Number(a.match(/\d+/)[0])}function h(a){o[0].style.fontSize=a+"px",i()}function i(){if(j()){var a;a=n.preserveLineHeight?f(c,"line-height"):g()+2;var b=o[0].querySelectorAll("img");angular.forEach(b,function(b){b.style.height(a+"px")}),o[0].style.lineHeight=a+"px"}}function j(){return!!o[0].style.fontSize}function k(){var a=parseInt(f(c,"padding-top"))+parseInt(f(c,"padding-bottom")),b=parseInt(f(c,"padding-left"))+parseInt(f(c,"padding-right"));return o[0].children[0].offsetWidth>c[0].offsetWidth-b||o[0].children[0].offsetHeight>c[0].offsetHeight-a}function l(){var a=parseInt(f(c,"padding-top"))+parseInt(f(c,"padding-bottom")),b=parseInt(f(c,"padding-left"))+parseInt(f(c,"padding-right"));return o[0].children[0].offsetWidth<c[0].offsetWidth-b&&o[0].children[0].offsetHeight<c[0].offsetHeight-a}var m=b.$eval(d.autoFontSize)||{},n=angular.extend({shrink:!0,grow:!0,minSize:1,preserveLineHeight:!1},m),o=angular.element(c[0].querySelector("div[data-role]"));b.$postDigest(e)}}}}]);