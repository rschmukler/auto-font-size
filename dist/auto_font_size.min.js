"use strict";angular.module("AutoFontSize",[]).directive("autoFontSize",["$window","$timeout",function(a,b){return{template:'<div data-role="inner" ng-transclude></div>',transclude:!0,link:{post:function(c,d,e){function f(){var a=0;if(j(),l()&&o.shrink)for(;l()&&100>a&&h()>=o.minSize;)i(h()-1),a+=1;else{if(!m()||!o.grow)return;for(;m()&&100>a;)i(h()+1),a+=1;i(h()-1)}c.$emit("auto-font-size:resized",{fontSize:h(),elem:d})}function g(b,c){return a.getComputedStyle?a.getComputedStyle(b[0]).getPropertyValue(c):void 0}function h(){var a=g(p,"font-size");return Number(a.match(/\d+/)[0])}function i(a){p[0].style.fontSize=a+"px",j()}function j(){if(k()){var a;a=o.preserveLineHeight?g(d,"line-height"):h()+2;var b=p[0].querySelectorAll("img");angular.forEach(b,function(b){b.style.height(a+"px")}),p[0].style.lineHeight=a+"px"}}function k(){return!!p[0].style.fontSize}function l(){if(!p[0].children[0].offsetWidth)return!1;var a=parseInt(g(d,"padding-top"))+parseInt(g(d,"padding-bottom")),b=parseInt(g(d,"padding-left"))+parseInt(g(d,"padding-right"));return p[0].children[0].offsetWidth>d[0].offsetWidth-b||p[0].children[0].offsetHeight>d[0].offsetHeight-a}function m(){if(!p[0].children[0].offsetWidth)return!1;var a=parseInt(g(d,"padding-top"))+parseInt(g(d,"padding-bottom")),b=parseInt(g(d,"padding-left"))+parseInt(g(d,"padding-right"));return p[0].children[0].offsetWidth<d[0].offsetWidth-b&&p[0].children[0].offsetHeight<d[0].offsetHeight-a}var n=c.$eval(e.autoFontSize)||{},o=angular.extend({shrink:!0,grow:!0,minSize:1,preserveLineHeight:!1},n),p=angular.element(d[0].querySelector("div[data-role]"));c.$watch(function(){b(f,0,!1)})}}}}]);